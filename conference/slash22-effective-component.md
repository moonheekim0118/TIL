# Effective Component 지속 가능한 성장과 컴포넌트

<iframe src="https://www.youtube.com/embed/fR8tsJ2r7Eg" width="950" height="534" frameborder="0" allowfullscreen=""></iframe>

- 변경 발생 ?
  - 놓쳤던 고객 니즈를 발견한것
  - 우리는 사용자를 모르기 때문에 어떤 니즈가 있는지 모르고 어떤 변경이 발생할 지 미리 알 수 없다.
  - 변경은 정의되어 있는 것이 아니기 때문에 예측 할 수 없다.
  - 따라서 변경에 예측하는게 아니라 대응해야한다.

컴포넌트가 무슨 역할을 하는지, 무슨 생각으로 만들었는지 파악할 수 있어야 한다.

- 이게 안되는 코드는, 변경사항이 생겼을 때 어딜 변경해야할지 모르고 프로젝트 코드 전부를 살펴봐야하는 문제점이 생긴다.

## 컴포넌트 잘 만들기 - 변경에 유연하게 대응하도록

### 컴포넌트는

- `Headless 기반으로 추상화하기`
- `컴포넌트는 한가지 역할만 하기`
- `도메인을 분리하기`
  - 도메인을 포함하는 컴포넌트와 그렇지 않은 컴포넌트를 분리하기

# 👀 Headless 기반으로 추상화하기

- 컴포넌트의 세가지 역할
  - 데이터 관리 (외부에서 주입 받은 데이터와 상태와 같은 내부데이터 모두 관리)
  - 그리고 그 데이터가 사용자에게 어떻게 보여질지 정의한다. (UI)
  - 그리고 UI 를 기반으로 사용자와 어떻게 상호작용 할 지 정의한다.
- 디자인에 의존하는 UI를 컴포넌트가 관리하는 데이터와 분리해보면 어떨까

예를 들어 달력이라고 했을때 …

- 달력을 구성하는 데이터 자체는 변하지 않지만, 달력의 UI는 언제든 바뀔 수 있다.
- **데이터를 추상화하기**
  - 달력을 구성하는 데이터를 useCalaneder 라는 훅스가 담당하게 한다.
  - 또 다른 달력컴포넌트를 만들어야 할 때, 디자인이 다르더라다도 다시 사용할수있음
  - 즉 UI 를 관심사에서 제외한다. 오로지 데이터에만 집중하여 모듈화 할 수 있다. 이런 패턴을 Headless 라고 한다.
  - 한가지 문제에만 집중하므로 더 많은 곳에서 사용 할 수 있다.
- **상호작용하는 부분을 추상화하기**
  - 즉 이벤트 핸들러도 훅스로 만들어서 주입하기
- **왜 훅스로 분리하는가**
  - 변경에 유연해지려면, 각 모듈이 한가지 일만 하는게 중요하기 때문이다.

# 👀 컴포넌트는 한가지 역할만 하기

- 다루고 있는 데이터 기준 / 담당하는 역할을 기준으로 분리하기
- 수정된 코드에서 Select 컴포넌트와 trigger 로 전달된 InputButton 컴포넌트는 서로의 존재를 모른다.
  - 서로의 변경이 서로에게 영향을 끼치지 않게 된다.
- 이렇게 합성가능하도록 컴포넌트 설계하기

# 👀 도메인 분리하기

- 언제 데이터를 주입받고, 언제 스스로 데이터를 가져와야할까?
- Props 네이밍에 도메인 맥락을 제거하면 이해하기 쉬워진다. 즉 더 일반적인 인터페이스로 분리할 수록 컴포넌트의 역할을 이해하기 쉽다.
- 사람은 무언가를 파악할 때, 기존에 알고있던 내용을 바탕으로 파악한다. (배경지식)
- 사람마다 알고있는 것이 다르기 때문에 최대한 많은 사람들이 알만한, 일반적인 단어로 표현해야 의도를 표현하기 쉽다.

# 😀 바로 시도해볼 것

1.  인터페이스 먼저 고민하기
    - 만들고자 하는 기능이 이미 모듈화 되어있다고 가정하고, 그것을 사용하듯이 컴포넌트를 작성해보기
      - 컴포넌트를 작성하는 의도가 무엇인가
      - 이 컴포넌트의 기능은 무엇인가
      - 어떻게 표현되어야 하는가
2.  컴포넌트를 나누기 전에 컴포넌트를 나누는 이유 생각해보기
    - 모든 로직이 한 곳에 있으면 파악하기 힘들다는것을 알고 있다. -> 복잡성 낮추기
    - 반복되는 부분을 모듈화 해놓으면 좋다 -> 재사용성

지금 컴포넌트를 나누는 행위가, 복잡도를 낮추는 것인지, 재사용을 위한 것인지, 꼭 분리해야하는 컴포넌트인지 고민해봐야한다.
