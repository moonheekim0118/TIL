# HTML 렌더링 중에 자바스크립트가 실행되면 렌더링이 멈추는 이유

- script 태그를 만나면, 스크립트가 해석 및 실행되는 동안 문서의 파싱은 중단된다.
- 스크립트가 외부에 있는 경우 우선 네트워크로부터 자원을 가져와야하는데, 이 또한 실시간으로 처리되고 자원을 받을 때까지 파싱은 중단된다.
- 왜냐하면 스크립트 내부에서 DOM트리를 조작 할 수 있으니까.
- 반면 CSS같은 경우 이론적으로 DOM 트리를 조작할 수 없으므로 문서 파싱을 기다리지 않는다.

- 따라서 스크립트 태그는 body 최하단에 존재하는게 성능상 좋다. 안그러면 사용자에게 렌더링이 중단 된 html 을 보여주기 때문에.

![](https://uploads.disquscdn.com/images/4303414a00e244a653fc9a4894719b730caae6d4c647b97966b1061ae16fec48.png?w=600&h=338)

## defer

- 백그라운드에서 다운로드
- 스크립트를 다운로드 하는 도중에도 html 파싱이 멈추지 않는다.
- 그리고, defer 스크립트 실행은 페이지 구성이 끝날 때 까지 지연된다.
- 즉 `다운로드는 백그라운드에서, 실행은 페이지 렌더링이 다 끝난 후!`
- 언제?
  - loading indicator 가 있고, 먼저 html 을 빠르게 보여줘야할 때?

## async

- 페이지와 완전히 독립적으로 동작
- 백그라운드에서 다운로드
- HTML 페이지는 async 스크립트 다운이 완료되길 기다리지 않고 페이지 내에서 컨텐츠를 처리한다.
- async 스크립트 실행은 html 파싱을 멈춘다.
- 즉, `다운로드는 백그라운드에서, 실행은 완료되었을 때!`
  - 현재 페이지와 독립적인 컨텐츠 (방문자수 카운터같은것)
